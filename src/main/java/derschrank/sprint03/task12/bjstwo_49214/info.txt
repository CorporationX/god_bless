Telegram-бот
👩‍💻 🧠🧠 (Дополнительная задача)




Условия задачи
Вы разрабатываете Telegram-бота, который должен обрабатывать сообщения от пользователей и отправлять ответы. Но чтобы избежать блокировки от серверов Telegram, нужно ограничить количество запросов к API. Например, бот должен отправлять не более 5 запросов в секунду. Ваша задача — реализовать механизм управления количеством запросов с учетом этого ограничения.

Требования задачи:
1️⃣ Создать класс TelegramBot с приватными полями:

REQUEST_LIMIT — максимальное количество запросов в секунду.

requestCounter — счетчик запросов в текущую секунду.

lastRequestTime — время последнего запроса.

2️⃣ Создать конструктор: Инициализировать поля requestCounter и lastRequestTime (например, установите текущее время при создании объекта).

3️⃣ Создать метод sendMessage(String message):

Этот метод будет имитировать отправку сообщение через API Telegram.

В начале метода получите текущее время.

Вычислите, сколько времени прошло с момента последнего запроса.

4️⃣ Проверить лимиты:

Если с последнего запроса прошло меньше секунды, увеличьте requestCounter на 1.

Если requestCounter превышает REQUEST_LIMIT, подождите до конца текущей секунды, прежде чем отправить сообщение.

5️⃣ Обнуление счетчика: Если прошедшее время с момента последнего запроса больше или равно секунде, обнулите requestCounter и обновите lastRequestTime на текущее время.

6️⃣ После выполнения всех проверок, “отправьте” сообщение через API.

7️⃣ Создать метод main в классе Main:

Создайте объект бота и запустите несколько потоков, каждый из которых будет пытаться отправить сообщение.

После завершения всех потоков, выведите сообщение о том, что задача выполнена.

Почему эта задача полезна?
Такой подход может быть полезен при написании реальных ботов, особенно если бот должен обрабатывать большой объем запросов от пользователей и отправлять ответы на эти запросы с использованием внешнего API, например, API Telegram.

--------------
16:44:27: Executing ':derschrank.sprint03.task12.bjstwo_49214.Main.main()'…

> Task :compileJava
> Task :processResources NO-SOURCE
> Task :classes

> Task :derschrank.sprint03.task12.bjstwo_49214.Main.main()
[1735314271 1/5] Message ABC #0
[1735314271 2/5] Message ABC #1
[1735314271 3/5] Message ABC #2
[1735314271 4/5] Message ABC #3
[1735314271 5/5] Message ABC #4
[1735314272 1/5] Message ABC #5
[1735314272 2/5] Message ABC #6
[1735314272 3/5] Message ABC #7
[1735314272 4/5] Message ABC #8
[1735314272 5/5] Message ABC #9
[1735314273 1/5] Message ABC #10
[1735314273 2/5] Message ABC #11
[1735314273 3/5] Message ABC #12
[1735314273 4/5] Message ABC #13
[1735314273 5/5] Message ABC #14
[1735314274 1/5] Message ABC #15
[1735314274 2/5] Message ABC #16
[1735314274 3/5] Message ABC #17
[1735314274 4/5] Message ABC #18
[1735314274 5/5] Message ABC #19
[1735314275 1/5] Message ABC #20
[1735314275 2/5] Message ABC #21
[1735314275 3/5] Message ABC #22
[1735314275 4/5] Message ABC #23
[1735314275 5/5] Message ABC #24
[1735314276 1/5] Message ABC #25
[1735314276 2/5] Message ABC #26
[1735314276 3/5] Message ABC #27
[1735314276 4/5] Message ABC #28
[1735314276 5/5] Message ABC #29
[1735314277 1/5] Message ABC #30
[1735314277 2/5] Message ABC #31
[1735314277 3/5] Message ABC #32
[1735314277 4/5] Message ABC #33
[1735314277 5/5] Message ABC #34
[1735314278 1/5] Message ABC #35
[1735314278 2/5] Message ABC #36
[1735314278 3/5] Message ABC #37
[1735314278 4/5] Message ABC #38
[1735314278 5/5] Message ABC #39
[1735314279 1/5] Message ABC #40
[1735314279 2/5] Message ABC #41
[1735314279 3/5] Message ABC #42
[1735314279 4/5] Message ABC #43
[1735314279 5/5] Message ABC #44
[1735314280 1/5] Message ABC #45
[1735314280 2/5] Message ABC #46
[1735314280 3/5] Message ABC #47
[1735314280 4/5] Message ABC #48
[1735314280 5/5] Message ABC #49
[1735314281 1/5] Message ABC #50
[1735314281 2/5] Message ABC #51
[1735314281 3/5] Message ABC #52
[1735314281 4/5] Message ABC #53
[1735314281 5/5] Message ABC #54
[1735314282 1/5] Message ABC #55
[1735314282 2/5] Message ABC #56
[1735314282 3/5] Message ABC #57
[1735314282 4/5] Message ABC #58
[1735314282 5/5] Message ABC #59
[1735314283 1/5] Message ABC #60
[1735314283 2/5] Message ABC #61
[1735314283 3/5] Message ABC #62
[1735314283 4/5] Message ABC #63
[1735314283 5/5] Message ABC #64
[1735314284 1/5] Message ABC #65
[1735314284 2/5] Message ABC #66
[1735314284 3/5] Message ABC #67
[1735314284 4/5] Message ABC #68
[1735314284 5/5] Message ABC #69
[1735314285 1/5] Message ABC #70
[1735314285 2/5] Message ABC #71
[1735314285 3/5] Message ABC #72
[1735314285 4/5] Message ABC #73
[1735314285 5/5] Message ABC #74
[1735314286 1/5] Message ABC #75
[1735314286 2/5] Message ABC #76
[1735314286 3/5] Message ABC #77
[1735314286 4/5] Message ABC #78
[1735314286 5/5] Message ABC #79
[1735314287 1/5] Message ABC #80
[1735314287 2/5] Message ABC #81
[1735314287 3/5] Message ABC #82
[1735314287 4/5] Message ABC #83
[1735314287 5/5] Message ABC #84
[1735314288 1/5] Message ABC #85
[1735314288 2/5] Message ABC #86
[1735314288 3/5] Message ABC #87
[1735314288 4/5] Message ABC #88
[1735314288 5/5] Message ABC #89
[1735314289 1/5] Message ABC #90
[1735314289 2/5] Message ABC #91
[1735314289 3/5] Message ABC #92
[1735314289 4/5] Message ABC #93
[1735314289 5/5] Message ABC #94
[1735314290 1/5] Message ABC #95
[1735314290 2/5] Message ABC #96
[1735314290 3/5] Message ABC #97
[1735314290 4/5] Message ABC #98
[1735314290 5/5] Message ABC #99

BUILD SUCCESSFUL in 23s
2 actionable tasks: 2 executed
16:44:50: Execution finished ':derschrank.sprint03.task12.bjstwo_49214.Main.main()'.
