–í—ã—á–∏—Å–ª–∏–º —á–∏—Å–ª–æ –ü–ò
derschrank2000-S04-T14-BJS2-49888
derschrank.sprint04.task14.bjstwo_49888

Sprint04. Task14. CompletableFuture. ThreadLocalRandom. Pi
-----------------------------
–í—ã—á–∏—Å–ª–∏–º —á–∏—Å–ª–æ –ü–ò
üë©‚Äçüíª üß†üß†üß†üß† (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞)


–£—Å–ª–æ–≤–∏—è –∑–∞–¥–∞—á–∏
–í–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî –≤—ã—á–∏—Å–ª–∏—Ç—å —á–∏—Å–ª–æ –ü–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª. –ú—ã –±—É–¥–µ–º –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ —Ç–æ—á–∫–∏ –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–≤–∞–¥—Ä–∞—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –ø–æ–ø–∞–¥–∞—é—Ç –ª–∏ –æ–Ω–∏ –≤ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è –≤–ø–∏—Å–∞–Ω–∞ –≤ —ç—Ç–æ—Ç –∫–≤–∞–¥—Ä–∞—Ç. –ß–µ–º –±–æ–ª—å—à–µ —Ç–æ—á–µ–∫ –º—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º, —Ç–µ–º —Ç–æ—á–Ω–µ–µ –ø–æ–ª—É—á–∏—Ç—Å—è –Ω–∞—à–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ —á–∏—Å–ª–∞ –ü–∏. –ß—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é ThreadLocalRandom –∏ CompletableFuture.


–ö–∞–∫ –º—ã –±—É–¥–µ–º —ç—Ç–æ –¥–µ–ª–∞—Ç—å:
–ú—ã –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–ª—É—á–∞–π–Ω–æ–π —Ç–æ—á–∫–∏ –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–≤–∞–¥—Ä–∞—Ç–∞:

1Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö —Ç–æ—á–µ–∫:
–ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª –¥–≤–∞–∂–¥—ã:
–ü–µ—Ä–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞—Å—Ç –Ω–∞–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É x,
–í—Ç–æ—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞—Å—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É y.
–ü–æ–ª—É—á–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ A(x, y) –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–≤–∞–¥—Ä–∞—Ç–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ –æ—Ç 0 –¥–æ 1.

2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è —Ç–æ—á–∫–∏ –≤ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç—å:
–£ –Ω–∞—Å –µ—Å—Ç—å –æ–∫—Ä—É–∂–Ω–æ—Å—Ç—å —Å —Ä–∞–¥–∏—É—Å–æ–º R = 1, –∫–æ—Ç–æ—Ä–∞—è –≤–ø–∏—Å–∞–Ω–∞ –≤ –∫–≤–∞–¥—Ä–∞—Ç. –û–∫—Ä—É–∂–Ω–æ—Å—Ç—å —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ —Ç–æ—á–∫–µ (0,0) —Å —Ä–∞–¥–∏—É—Å–æ–º 1.
–¢–æ—á–∫–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤–Ω—É—Ç—Ä—å –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏, –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–µ —É—Å–ª–æ–≤–∏–µ: –ï—Å–ª–∏ —Å—É–º–º–∞ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ x –∏ y –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ 1, —Ç–æ—á–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏, –∏–Ω–∞—á–µ ‚Äî —Å–Ω–∞—Ä—É–∂–∏.
x¬≤ + y¬≤ <= R¬≤

3Ô∏è‚É£ –ú–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞:
–ú—ã –±—É–¥–µ–º –ø–æ–≤—Ç–æ—Ä—è—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–Ω–æ–≥–æ —Ä–∞–∑, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫. –ù–µ–∫–æ—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å —ç—Ç–∏—Ö —Ç–æ—á–µ–∫ –æ–∫–∞–∂–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏, –∞ –¥—Ä—É–≥–∞—è ‚Äî —Å–Ω–∞—Ä—É–∂–∏.
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–ª–∏ –≤–Ω—É—Ç—Ä—å –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏, –æ–±–æ–∑–Ω–∞—á–∏–º –∫–∞–∫ inside, –∞ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ ‚Äî –∫–∞–∫ all.

4Ô∏è‚É£ –í—ã–≤–æ–¥ —Ñ–æ—Ä–º—É–ª—ã –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —á–∏—Å–ª–∞ –ü–∏:
–ü–ª–æ—â–∞–¥—å –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ:
S_–æ = œÄ * R¬≤ = œÄ * 1¬≤ = œÄ
–ü–ª–æ—â–∞–¥—å –∫–≤–∞–¥—Ä–∞—Ç–∞:
S_–∫ = a * a = 1 * 1 = 1
–¢–∞–∫ –∫–∞–∫ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å —á–µ—Ç–≤–µ—Ä—Ç—å—é –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏, –ø–ª–æ—â–∞–¥—å —á–µ—Ç–≤–µ—Ä—Ç–∏ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ —Ä–∞–≤–Ω–∞:
S_–æ / 4 = œÄ / 4
–¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ –º—ã –∑–Ω–∞–µ–º, —Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫ –ø–æ–ø–∞–ª–æ –≤ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç—å, —Ç–æ –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —á–∏—Å–ª–∞ –ü–∏:
S_–æ / 4 / S_–∫ = inside / all = œÄ / 4
–û—Ç—Å—é–¥–∞ –º–æ–∂–µ–º –≤—ã–≤–µ—Å—Ç–∏:
œÄ = 4 * inside / all



–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1Ô∏è‚É£ –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å Point, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ—á–∫—É –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏. –ü–æ–ª—è:
x ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ x —Ç–æ—á–∫–∏ (—Ç–∏–ø double),
y ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ y —Ç–æ—á–∫–∏ (—Ç–∏–ø double).
–ú–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ø–∞–¥–∞–Ω–∏—è —Ç–æ—á–∫–∏ –≤ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç—å:
public boolean isInsideCircle() {
    return x * x + y * y <= 1;
}
2Ô∏è‚É£ –°–æ–∑–¥–∞–π—Ç–µ –º–µ—Ç–æ–¥ calculatePi(int n):
–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–∞ –≤—Ö–æ–¥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ n, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö–æ—Ç–∏–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å.
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ—á–µ–∫ –∏ –∏—Ö –ø—Ä–æ–≤–µ—Ä–∫–∏.
–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ThreadLocalRandom, –∫–æ—Ç–æ—Ä—ã–π –±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
–ö–∞–∂–¥—É—é –∑–∞–¥–∞—á—É –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–æ—á–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CompletableFuture.
–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ç–æ—á–µ–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞ –ü–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–µ:
œÄ = 4 * inside / all

3Ô∏è‚É£ –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CompletableFuture.supplyAsync() –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ—á–µ–∫ –∏ –∏—Ö –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç—å.
–°–æ–∑–¥–∞–π—Ç–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ—á–µ–∫, –ø–æ–ø–∞–≤—à–∏—Ö –≤ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç—å.
–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á —Å–æ–±–µ—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ.


–ü–æ—á–µ–º—É —ç—Ç–∞ –∑–∞–¥–∞—á–∞ –ø–æ–ª–µ–∑–Ω–∞?
–≠—Ç–∞ –∑–∞–¥–∞—á–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CompletableFuture –∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á. –ß–µ–º –±–æ–ª—å—à–µ —Ç–æ—á–µ–∫ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, —Ç–µ–º —Ç–æ—á–Ω–µ–µ –±—É–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ —Ç–∞–∫–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –ª–µ–≥–∫–æ –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞–≥—Ä—É–∑–∫–∏ —Å –ø–æ–º–æ—â—å—é CompletableFuture –∏ Stream API.
-----------------------------
[785330:999997] 3,141329
[785331:999998] 3,141330
[785331:999999] 3,141327
[785332:1000000] 3,141328
PI = 3.141328

BUILD SUCCESSFUL in 1m 10s
2 actionable tasks: 2 executed
4:08:27: Execution finished ':derschrank.sprint04.task14.bjstwo_49888.Main.main()'.
