Задача: Вам нужно написать Java-приложение, которое представляет собой простую модель системы обработки заказов для Amazon. Вы должны использовать CompletableFuture для асинхронной обработки заказов и AtomicInteger для подсчёта общего количества обработанных заказов.

Пример классов:

Класс Order — описывает заказ.
id — уникальный идентификатор заказа; status — статус заказа.

Основные шаги:

Создайте класс Order с полями id и status, а также конструктором и геттерами/сеттерами.

Создайте класс OrderProcessor, который будет управлять обработкой заказов.

В классе OrderProcessor создайте AtomicInteger totalProcessedOrders, который будет хранить количество обработанных заказов.

Создайте асинхронный метод processOrder(Order), который ждёт некоторое время через Thread.sleep, имитируя длинную операцию, затем изменяет статус заказа на «Обработано» и увеличивает общий счётчик обработанных заказов.

Используйте CompletableFuture внутри метода processOrder для запуска асинхронной задачи.

Ожидайте завершения всех задач, которые вернулись из processOrder в виде CompletableFuture, используя CompletableFuture.allOf(), и выведите количество обработанных заказов.

Почему эта задача полезна?
В больших системах у вас будут сотни и тысячи потоков. Всегда важно понимать, что если они взаимодействуют с каким-то общим состоянием, то доступ к нему должен быть синхронизирован.

Здесь мы сразу видим, что любая асинхронная задача — это отдельный поток. И ещё видим, что все они добавляют единичку к значению счетчика, который ОБЩИЙ на все потоки. А значит, операции с ним должны быть атомарны.

То же самое происходит в реальном Amazon. Каждый HTTP запрос пользователя для заказа в маркетплейсе выполняется в отдельном потоке. Но счётчик всех заказов внутри Amazon один! Это значит, что его изменения должны выполняться атомарно!